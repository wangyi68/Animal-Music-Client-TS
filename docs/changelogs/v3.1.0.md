# v3.1.0 - DJ Role System (2025-12-24)

> ThÃªm há»‡ thá»‘ng quáº£n lÃ½ quyá»n DJ Ä‘á»ƒ kiá»ƒm soÃ¡t ai Ä‘Æ°á»£c phÃ©p Ä‘iá»u khiá»ƒn bot

---

## âœ¨ TÃ­nh nÄƒng má»›i

### ğŸ§ DJ Role System
Há»‡ thá»‘ng quyá»n DJ linh hoáº¡t vá»›i nhiá»u cÃ¡ch thiáº¿t láº­p:

- **DJ Role**: Set má»™t role lÃ m DJ - ai cÃ³ role nÃ y Ä‘Æ°á»£c quyá»n Ä‘iá»u khiá»ƒn bot
- **DJ Users**: ThÃªm tá»«ng user vÃ o danh sÃ¡ch DJ - khÃ´ng cáº§n role
- **Toggle Mode**: Báº­t/táº¯t DJ mode - khi táº¯t ai cÅ©ng Ä‘iá»u khiá»ƒn Ä‘Æ°á»£c
- **Multi-level Permission**: Owner > Admin > DJ Role > DJ User > Requester > Alone in VC

### ğŸ“‹ Lá»‡nh má»›i: `/dj`
| Subcommand | MÃ´ táº£ |
|------------|-------|
| `/dj role @role` | Set DJ Role cho server |
| `/dj add @user` | ThÃªm user vÃ o danh sÃ¡ch DJ |
| `/dj remove @user` | XÃ³a user khá»i danh sÃ¡ch DJ |
| `/dj status` | Xem tráº¡ng thÃ¡i DJ settings |
| `/dj toggle on/off` | Báº­t/táº¯t DJ mode |
| `/dj reset` | Reset DJ settings vá» máº·c Ä‘á»‹nh |

### ğŸ” Permission Levels
Thá»© tá»± Æ°u tiÃªn kiá»ƒm tra quyá»n:
1. **Bot Owner** - Full access
2. **Administrator** - Full access
3. **Manage Guild** - Full access
4. **DJ Role** - Náº¿u cÃ³ role Ä‘Æ°á»£c set
5. **DJ User** - Náº¿u user náº±m trong danh sÃ¡ch
6. **Song Requester** - Chá»‰ Ä‘iá»u khiá»ƒn bÃ i cá»§a mÃ¬nh
7. **Alone in VC** - Khi chá»‰ cÃ³ 1 ngÆ°á»i trong voice

---

## ğŸ”§ Cáº£i tiáº¿n

- âœ… Cáº­p nháº­t InteractionHandler Ä‘á»ƒ sá»­ dá»¥ng há»‡ thá»‘ng DJ permission má»›i
- âœ… ThÃªm DJSettings schema trong database vá»›i indexes
- âœ… Permission check async Ä‘á»ƒ há»— trá»£ database lookup
- âœ… Tsundere messages cho cÃ¡c trÆ°á»ng há»£p khÃ´ng cÃ³ quyá»n

---

## ğŸ“ Files thay Ä‘á»•i

| File | Thay Ä‘á»•i |
|------|----------|
| `src/utils/permissions.ts` | **Má»šI** - Logic kiá»ƒm tra quyá»n DJ |
| `src/commands/config/dj.ts` | **Má»šI** - Command quáº£n lÃ½ DJ settings |
| `src/database/index.ts` | ThÃªm DJSettings schema vÃ  CRUD operations |
| `src/types/index.ts` | ThÃªm DJSettingsDocument interface |
| `src/handlers/InteractionHandler.ts` | Sá»­ dá»¥ng há»‡ thá»‘ng DJ permission cho buttons |
| `src/handlers/SlashHandler.ts` | Sá»­ dá»¥ng há»‡ thá»‘ng DJ permission cho slash commands |
| `src/core/index.ts` | Cáº­p nháº­t version 3.1.0 |
| `docs/changelogs/` | **Má»šI** - ThÆ° má»¥c chá»©a changelogs |
| `README.md` | Cáº­p nháº­t documentation |
| `package.json` | Bump version 3.1.0 |

---

## ğŸ“Š Database Schema má»›i

```typescript
interface DJSettingsDocument {
    guildId: string;
    djRoleId: string | null;      // Role ID Ä‘Æ°á»£c phÃ©p lÃ m DJ
    djUserIds: string[];          // Danh sÃ¡ch User IDs Ä‘Æ°á»£c phÃ©p lÃ m DJ
    enabled: boolean;             // Báº­t/táº¯t DJ mode
    createdAt: Date;
    updatedAt: Date;
}
```

---

## ğŸ’¡ CÃ¡ch sá»­ dá»¥ng

### Thiáº¿t láº­p DJ Role
```
/dj role @DJ
```

### ThÃªm DJ User (khÃ´ng cáº§n role)
```
/dj add @username
```

### Báº­t DJ Mode
```
/dj toggle true
```

### Xem tráº¡ng thÃ¡i
```
/dj status
```

---

> Made with ğŸ’– by Animal Music Team
