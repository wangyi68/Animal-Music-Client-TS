# v3.0.0 - Big Architecture Update (2025-12-23)

> TÃ¡i cáº¥u trÃºc kiáº¿n trÃºc vá»›i Core Services má»›i

---

## ğŸš€ Kiáº¿n trÃºc má»›i (Core Services)

- âœ… **StateManager**: Unified state management vá»›i caching, history, vÃ  auto cleanup
- âœ… **NodeManager**: Smart Lavalink node selection vá»›i health scoring vÃ  load balancing
- âœ… **QueueManager**: Enhanced queue operations (move, remove, fair shuffle, duplicate removal)
- âœ… **ErrorHandler**: Unified error handling vá»›i error codes vÃ  retry logic

---

## âœ¨ Lá»‡nh má»›i

| Lá»‡nh | MÃ´ táº£ |
|------|-------|
| `/playnext` | ThÃªm bÃ i vÃ o Ä‘áº§u queue (phÃ¡t ngay sau bÃ i hiá»‡n táº¡i) |
| `/move <from> <to>` | Di chuyá»ƒn bÃ i trong queue |
| `/remove <position>` | XÃ³a bÃ i khá»i queue theo vá»‹ trÃ­ |
| `/fairshuffle` | XÃ¡o trá»™n cÃ´ng báº±ng (má»—i user Ä‘Æ°á»£c phÃ¡t Ä‘á»u) |

---

## ğŸ¯ Cáº£i tiáº¿n

- âœ… **Smart Node Selection**: Tá»± Ä‘á»™ng chá»n node tá»‘t nháº¥t dá»±a trÃªn health score
- âœ… **Health Monitoring**: Theo dÃµi CPU, RAM, ping cá»§a tá»«ng node
- âœ… **Auto Failover**: Tá»± Ä‘á»™ng chuyá»ƒn sang node khÃ¡c khi cÃ³ lá»—i
- âœ… **Caching System**: Cache search results vÃ  track metadata
- âœ… **Better History**: LÆ°u lá»‹ch sá»­ phÃ¡t vá»›i giá»›i háº¡n configurable
- âœ… **Graceful Cleanup**: Tá»± Ä‘á»™ng cleanup inactive states

---

## ğŸ“ Files má»›i

| File | MÃ´ táº£ |
|------|-------|
| `src/core/StateManager.ts` | Unified state management |
| `src/core/NodeManager.ts` | Smart node selection & monitoring |
| `src/core/QueueManager.ts` | Enhanced queue operations |
| `src/core/ErrorHandler.ts` | Unified error handling |
| `src/core/index.ts` | Core exports |
| `src/commands/music/playnext.ts` | PlayNext command |
| `src/commands/music/move.ts` | Move command |
| `src/commands/music/remove.ts` | Remove command |
| `src/commands/music/fairshuffle.ts` | FairShuffle command |

---

> Made with ğŸ’– by Animal Music Team
